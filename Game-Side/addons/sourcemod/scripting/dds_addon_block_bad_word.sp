/************************************************************************
 * Dynamic Dollar Shop - [Addon] Block Bad Word (Sourcemod)
 *  # This Plugin will be worked with 'dds_module_tag'.
 * 
 * Copyright (C) 2012-2013 Eakgnarok
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>
 * 
************************************************************************/
/*

 - 참고 - 
 
 이 플러그인의 주요 동작 코드는 Tobi17 님이 만드신 특정 단어 발설 방지 플러그인을 참고로 하여 만들어졌습니다.
 Tobi17 님에게 고맙다는 말을 전합니다.
 
 그리고 이 플러그인은 'dds_module_tag'가 있어야 작동하기 때문에 없으면 작동이 되지 않습니다.

*/
#include <sourcemod>
#include <dds>

/*******************************************************
 V A R I A B L E S
*******************************************************/
// 욕설 필터링(기본적으로 한국 마비노기 클라이언트 욕설 필터링)
new String:dds_sBadWords[][] = 
{
  "좉"
, "좇"
, "좆"
, "죶"
, "죷"
, "죹"
, "아구지"
, "아구창"
, "아구통"
, "강간"
, "스와핑"
, "공알"
, "개보지"
, "개좆"
, "귀두"
, "닝기리"
, "딸따리"
, "딸딸이"
, "떡치기"
, "래즈비언"
, "번섹"
, "번쌕"
, "번쌕"
, "번쎅"
, "부랄"
, "불알"
, "빠구리"
, "빠굴"
, "빠굴이"
, "빠그리"
, "빨통"
, "사카시"
, "삭하시"
, "색스"
, "색쑤"
, "색쓰"
, "섹수"
, "섹스"
, "섹쑤"
, "섹쓰"
, "섹히"
, "쇅수"
, "쇅스"
, "쇅쑤"
, "쇅쓰"
, "쉑수"
, "쉑스"
, "쉑쑤"
, "쉑쓰"
, "쌕수"
, "쌕쑤"
, "쌕쓰"
, "쎅수"
, "쎅스"
, "쎅쑤"
, "쎅쓰"
, "쐑수"
, "쐑스"
, "쐑쑤"
, "쐑쓰"
, "쒝수"
, "쒝스"
, "쒝쑤"
, "쒝쓰"
, "애널"
, "애미보지"
, "애미자지"
, "애비자지"
, "애비보지"
, "잠지"
, "화냥년"
, "후장"
, "시발"
, "씨벨"
, "씨밸"
, "시팔"
, "싯팔"
, "ㅆ1발"
, "ㅆ1팔"
, "ㅆI발"
, "ㅆi발"
, "ㅆl발"
, "ㅆl발"
, "ㅆl팔"
, "쒸발"
, "쒸방"
, "씨발"
, "씨빡"
, "씨빨"
, "씹"
, "씹8"
, "씹알"
, "씹창"
, "씹탱"
, "씹팔"
, "씹펄"
, "씹풀"
, "씹할"
, "뉘귀미"
, "뉘기미"
, "뉘미"
, "늬귀미"
, "늬미"
, "니귀미"
, "니기미"
, "니믜"
, "니미"
, "니애미"
, "니에미"
, "니주가리"
, "닝기미"
, "저빱"
, "접밥"
, "젓가튼"
, "젓같은"
, "젓까"
, "젓까는"
, "젓밥"
, "젓빠지게"
, "젖가튼"
, "젖같은"
, "젖나게"
, "젖마난"
, "젖만한"
, "젖밥"
, "조까"
, "조까는"
, "조까튼"
, "조또"
, "조빱"
, "족같은"
, "졷까"
, "족까"
, "졷까는"
, "좁밥"
, "좃가튼"
, "좃같네"
, "좃같은"
, "좃까"
, "좃까"
, "좃까는"
, "좃까는"
, "좃나"
, "좃나게"
, "좃도"
, "좃밥"
, "좆가튼"
, "좆같은"
, "좆까"
, "좆까"
, "좆까는"
, "좆밥"
, "좇같네"
, "좇까"
, "좇까는"
, "좉까는"
, "죶가튼"
, "죶같은"
, "개같은년"
, "개같은놈"
, "개같은뇬"
, "개년"
, "개놈"
, "개뇬"
, "개새꺄"
, "개새끼"
, "개세끼"
, "개자지"
, "게새끼"
, "게세끼"
, "샹년"
, "샹놈"
, "샹늠"
, "시빨년"
, "십새꺄"
, "십새끼"
, "십새키"
, "십색꺄"
, "십색끼"
, "십색히"
, "십세끼"
, "십쉐리"
, "십쉐이"
, "십쉑"
, "십쉑히"
, "십시끼"
, "십쌔꺄"
, "십쌔끼"
, "십쌔키"
, "십쎄끼"
, "십쎄끼"
, "십씨키"
, "십씨키"
, "쌍것"
, "쌍넌"
, "쌍넘"
, "쌍년"
, "쌍놈"
, "쌍뇬"
, "썅넌"
, "썅넘"
, "썅년"
, "썅놈"
, "썅뇬"
, "씝년"
, "씨방새"
, "씨방세"
, "씨방쉐"
, "씨밸년"
, "씨입년"
, "씨입뇬"
, "씹넘"
, "씹년"
, "씹뇬"
, "씹때꺄"
, "씹때끼"
, "씹새"
, "씹새꺄"
, "씹새끼"
, "씹새키"
, "씹색꺄"
, "씹색끼"
, "씹색히"
, "씹세끼"
, "씹쉐"
, "씹쉐리"
, "씹쉐이"
, "씹쉑"
, "씹쉑히"
, "씹시끼"
, "씹쌔꺄"
, "씹쌔끼"
, "씹쌔키"
, "씹쎄끼"
, "씹씨키"
, "창녀"
, "창년"
, "창뇬"
, "챵녀"
, "챵년"
, "챵뇬"
, "bastard"
, "bitch"
, "cunt"
, "damn"
, "fuck"
, "pussy"
, "shit"
, "anal"
, "asshole"
, "dildo"
, "gay"
, "porno"
, "sex"
, "lesbian"
, "penis"
, "cock"
, "horny"
, "ㄱH뇬"
, "개넌"
, "개넘"
, "개눔"
, "개도라이"
, "개때꺄"
, "개또라이"
, "개부럴"
, "개색기"
, "개색꺄"
, "개색끼"
, "개샠"
, "개섹"
, "개쇄끼"
, "개쇅"
, "개쇅갸"
, "개쇅기"
, "개쇅꺄"
, "개쇅끼"
, "개쇅캬"
, "개쇅키"
, "개쉐"
, "개쉐끼"
, "개쉑"
, "개쉑갸"
, "개쉑기"
, "개쉑꺄"
, "개쉑끼"
, "개쉑캬"
, "개쉑키"
, "개쉑히"
, "개쉽"
, "개쌔꺄"
, "개쌔끼"
, "개쌕끼"
, "개썅년"
, "개쒜리"
, "개쒝"
, "개쒝갸"
, "개쒝기"
, "개쒝꺄"
, "개쒝끼"
, "개쒝캬"
, "개쒝키"
, "개쒹기"
, "개염창"
, "개자식"
, "개젓"
, "개젖"
, "개졋"
, "개졎"
, "개지랄"
, "개찌질이"
, "개후랄"
, "개후레"
, "게뇬"
, "게눔"
, "게새리"
, "게색"
, "게색기"
, "게색끼"
, "게세"
, "게섹"
, "게섹놈아"
, "게쉐"
, "게시끼"
, "게시퀴"
, "게쌔기"
, "게쌕끼"
, "계같은뇬"
, "꼬추"
, "보쥐"
, "보짓"
, "보g"
, "보z"
, "성감대"
, "성겨육"
, "성경험"
, "성관계"
, "성교"
, "성교제"
, "성기"
, "성기구"
, "성방"
, "성상담"
, "성생활"
, "성섹스"
, "성숙녀"
, "성숙녀"
, "성욕구"
, "성인방송"
, "성인사진"
, "성인소설"
, "성인야동"
, "성인야사"
, "성인야캠"
, "성인용품"
, "성체위"
, "성체험"
, "성추행"
, "성충동"
, "성클리닉"
, "성태크닉"
, "성테크닉"
, "성폭행"
, "성행위"
, "알몸공개"
, "알몸사진"
, "알몸쇼"
, "애무"
, "애무"
, "애액"
, "애자"
, "애쟈"
, "앰창"
, "야겜"
, "야녀"
, "야담"
, "야덩"
, "야동"
, "야똥"
, "야섹"
, "야시녀"
, "야시시"
, "야자료"
, "야캠"
, "야하게"
, "야한놈"
, "야한동영상"
, "야한사이트"
, "야한사진"
, "양아치"
, "얼간이"
, "엄창"
, "에믜"
, "에자"
, "엑스터시"
, "엠창"
, "염병"
, "옘병"
, "오까마"
, "오랄"
, "오럴"
, "오르가슴"
, "오르가즘"
, "올가즘"
, "옹녀"
, "원조교재"
, "원조교제"
, "원조교제"
, "원초적"
, "원하는녀"
, "월경"
, "유방"
, "육구자세"
, "육봉"
, "육봉대가리"
, "윤간"
, "윤락"
, "음경"
, "음담패설"
, "음란"
, "음모"
, "음부"
, "자위"
, "자쥐"
, "자짓"
, "자g"
, "자z"
, "잠쥐"
, "잠짓"
, "잠g"
, "잠z"
, "저까"
, "저까는"
, "저까는"
, "저까튼"
, "저년"
, "저빠지게"
, "저샤키"
, "전나"
, "전나게"
, "전나구려"
, "절라게"
, "젓나"
, "젓나게"
, "젓마난"
, "젓만한"
, "정력"
, "정사"
, "정자"
, "젖고픈"
, "젖까"
, "젖까는"
, "젖꼭지"
, "젖나"
, "젖나"
, "젖나게"
, "젖도"
, "젖은숲"
, "젖통"
, "처녀막"
, "체모"
, "체위"
, "최음제"
, "컴섹"
, "컴쌕"
, "콘돔"
, "콩까"
, "콩까자"
, "크리토리스"
, "클리토리스"
, "퇴폐"
, "패니스"
, "패티쉬"
, "패티시"
, "팰라치오"
, "퍼르노"
, "퍽큐"
, "펀색"
, "펀섹"
, "페니스"
, "페미돔"
, "페티걸"
, "페티쉬"
, "페티시"
, "포로노"
, "포르너"
, "포르노"
, "포르느"
, "포르로"
, "포온섹"
, "폰색"
, "폰섹"
, "폰즈"
, "풋잡"
, "프리섹스"
, "곧휴"
, "bbagoori"
, "bbagury"
, "bo지"
, "bogy"
, "boji"
, "boji"
, "bojy"
, "bojy"
, "bozi"
, "bozy"
, "bunsec"
, "bunsek"
, "byuntae"
, "c8"
, "c발"
, "c팔"
, "ccibal"
, "ce발"
, "cibal"
, "comesek"
, "comsek"
, "condom"
, "ecstasy"
, "fuckup"
, "hentai"
, "ja위"
, "ja지"
, "jaji"
, "jamji"
, "jasal"
, "jawe"
, "jawi"
, "jazi"
, "jazy"
, "ji랄"
, "jiral"
, "jot"
, "Masturbati"
, "molca"
, "nigimi"
, "nomo"
, "nude"
, "penis"
, "pennis"
, "ponsec"
, "ponsek"
, "ponz"
, "prno"
, "shit"
, "sibal"
, "sipal"
, "sival"
, "ssibal"
, "ssipal"
, "ssival"
, "suck"
, "suicide"
, "swaping"
, "twocom"
, "zaji"
, "zasal"
, "zazi"
, "zot"
};

/*******************************************************
 P L U G I N  I N F O R M A T I O N
*******************************************************/
public Plugin:myinfo = 
{
	name = "Dynamic Dollar Shop :: [Addon] Block Bad Word",
	author = "Eakgnarok (Thx Tobi17 :D)",
	description = "Many clients can allow to use several items in the game.",
	version = DDS_PLUGIN_VERSION,
	url = "http://eakgnarok.pe.kr"
};

/*******************************************************
 F O R W A R D   F U N C T I O N S
*******************************************************/
public OnPluginStart()
{
	DDS_PrintToServer("'Dynamic Dollar Shop :: [Addon] Block Bad Word' has been loaded.");
}

/*******************************************************
 G E N E R A L   F U N C T I O N S
*******************************************************/
public CheckBadWord(String:command[])
{
	new badword = 0;
	new word_idx = 0;
	
	while ((badword == 0) && (word_idx < sizeof(dds_sBadWords)))
	{
		if (StrContains(command, dds_sBadWords[word_idx], false) > -1)
		{
			badword++;
		}
		word_idx++;
	}
	if (badword > 0)
	{
		return 1;
	}
	
	return 0;
}

/*******************************************************
 C A L L B A C K   F U N C T I O N S
*******************************************************/
public Action:DDS_ClientChat_Pre(client, String:msg[])
{
	if (!DDS_IsPluginOn())	return Plugin_Continue;
	
	if (client > 0)
	{
		new start_idx = 0;
		new msg_length = strlen(msg);
		
		if (msg_length > 0)
		{
			if (msg[0] == 34)
			{
				start_idx = 1;
				if (msg[msg_length - 1] == 34)
					msg[msg_length - 1] = 0;
			}
			
			if (msg[start_idx] == 47)	start_idx++;
			
			ReplaceString(msg, 255, ".", "");
			ReplaceString(msg, 255, "-", "");
			ReplaceString(msg, 255, ";", "");
			ReplaceString(msg, 255, ":", "");
			ReplaceString(msg, 255, "/", "");
			ReplaceString(msg, 255, "`", "");
			
			new msg_blocked = CheckBadWord(msg[start_idx]);
			
			if (msg_blocked > 0)
			{
				new String:username[64];
				
				if (!GetClientName(client, username, sizeof(username)))
					strcopy(username, sizeof(username), "UNKNOWN");
				
				DDS_PrintToChat(client, "채팅에 욕을 쓰지 말아주세요.");
				LogMessage("%s says BAD LANGUAGE", username);
				
				return Plugin_Handled;
			}
		}
	}
	
	return Plugin_Continue;
}